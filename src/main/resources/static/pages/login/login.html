<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="expires" content="0">
    <title>用户登录</title>
    <link rel="stylesheet" href="../bootstrap-dist/css/bootstrap.css">
    <script src="../js/jquery-3.5.1.min.js" type="text/javascript"></script>
    <style>
        .loginarea {
            width: 500px;
            height: 300px;
            margin-top: 100px;
            margin-left: 50%;
        }
    </style>
</head>
<body style="background-image: url('../images/bg3.jpg'); background-repeat: no-repeat;-moz-background-size:100% ; background-size:100% ;">
<div style="position: absolute;top: 70px; left: 250px; z-index: 999"><img src="../images/logo.png"></div>
<div class="loginarea">
    <div class="jumbotron">
        <h3 align="center" class="mb-4">登 录</h3>
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home"
                   aria-selected="true">账号密码登录</a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab"
                   aria-controls="profile" aria-selected="false">手机登录</a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="email-tab" data-toggle="tab" href="#emaildiv" role="tab"
                   aria-controls="emaildiv" aria-selected="false">邮箱登录</a>
            </li>
        </ul>
        <hr>
        <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                <div class="input-group input-group-lg mb-4">
                    <div class="input-group-prepend">
                <span class="input-group-text" id="inputGroup-sizing-lg-uname">账号
                    <svg width="1.2em" height="1.2em" viewBox="0 0 16 16" class="bi bi-person-fill" fill="currentColor"
                         xmlns="http://www.w3.org/2000/svg">
                      <path fill-rule="evenodd"
                            d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
                    </svg>
                </span>
                    </div>
                    <input type="text" id="loginid" class="form-control" placeholder="输入登录名"
                           aria-label="Sizing example input" aria-describedby="inputGroup-sizing-lg-uname">
                </div>

                <div class="input-group input-group-lg mb-4">
                    <div class="input-group-prepend">
                <span class="input-group-text" id="inputGroup-sizing-lg-pwd">密码
                    <svg width="1.2em" height="1.2em" viewBox="0 0 16 16" class="bi bi-unlock-fill" fill="currentColor"
                         xmlns="http://www.w3.org/2000/svg">
                      <path d="M.5 9a2 2 0 0 1 2-2h7a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9z"/>
                      <path fill-rule="evenodd" d="M8.5 4a3.5 3.5 0 1 1 7 0v3h-1V4a2.5 2.5 0 0 0-5 0v3h-1V4z"/>
                    </svg>
                </span>
                    </div>
                    <input type="password" id="password" class="form-control" placeholder="输入登录密码"
                           aria-label="Sizing example input" aria-describedby="inputGroup-sizing-lg-pwd">
                </div>
                <input type="button" value="登 录" class="btn btn-primary btn-lg btn-block" onclick="login()">
            </div>
            <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                <div class="input-group input-group-lg mb-4">
                    <div class="input-group-prepend">
                <span class="input-group-text" id="inputGroup-sizing-lg-phone">手机号
                    <svg width="1.2em" height="1.2em" viewBox="0 0 16 16" class="bi bi-phone-fill" fill="currentColor"
                         xmlns="http://www.w3.org/2000/svg">
                      <path fill-rule="evenodd"
                            d="M3 2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V2zm6 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
                    </svg>
                </span>
                    </div>
                    <input type="text" id="phone" class="form-control" placeholder="输入手机号"
                           aria-label="Sizing example input" aria-describedby="inputGroup-sizing-lg-phone">
                </div>

                <div class="input-group input-group-lg mb-4">
                    <div class="input-group-prepend">
                        <span class="input-group-text" id="inputGroup-sizing-lg-code">验证码
                            <svg width="1.2em" height="1.2em" viewBox="0 0 16 16" class="bi bi-shield-lock-fill"
                                 fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                              <path fill-rule="evenodd"
                                    d="M8 .5c-.662 0-1.77.249-2.813.525a61.11 61.11 0 0 0-2.772.815 1.454 1.454 0 0 0-1.003 1.184c-.573 4.197.756 7.307 2.368 9.365a11.192 11.192 0 0 0 2.417 2.3c.371.256.715.451 1.007.586.27.124.558.225.796.225s.527-.101.796-.225c.292-.135.636-.33 1.007-.586a11.191 11.191 0 0 0 2.418-2.3c1.611-2.058 2.94-5.168 2.367-9.365a1.454 1.454 0 0 0-1.003-1.184 61.09 61.09 0 0 0-2.772-.815C9.77.749 8.663.5 8 .5zm.5 7.415a1.5 1.5 0 1 0-1 0l-.385 1.99a.5.5 0 0 0 .491.595h.788a.5.5 0 0 0 .49-.595L8.5 7.915z"/>
                            </svg>
                        </span>
                    </div>
                    <input type="text" id="verifycode" class="form-control" placeholder="输入验证码"
                           aria-label="Sizing example input" aria-describedby="inputGroup-sizing-lg-code">
                    <button id="sendcodebtn" onclick="sendVCode()" class="btn btn-outline-success my-2 my-sm-0"
                            type="button"
                            style="margin-left: 3px;">发送验证码
                    </button>
                </div>
                <input type="button" value="登 录" class="btn btn-primary btn-lg btn-block" onclick="loginbycode()">
            </div>
            <div class="tab-pane fade" id="emaildiv" role="tabpanel" aria-labelledby="email-tab">
                <div class="input-group input-group-lg mb-4">
                    <div class="input-group-prepend">
                <span class="input-group-text" id="inputGroup-sizing-lg-email">邮&nbsp;&nbsp;箱&nbsp;
                    <svg width="1.2em" height="1.2em" viewBox="0 0 16 16" class="bi bi-envelope-fill"
                         fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                      <path fill-rule="evenodd"
                            d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555zM0 4.697v7.104l5.803-3.558L0 4.697zM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757zm3.436-.586L16 11.801V4.697l-5.803 3.546z"/>
                    </svg>
                </span>
                    </div>
                    <input type="text" id="email" class="form-control" placeholder="输入邮箱地址"
                           aria-label="Sizing example input" aria-describedby="inputGroup-sizing-lg-email">
                </div>

                <div class="input-group input-group-lg mb-4">
                    <div class="input-group-prepend">
                        <span class="input-group-text" id="inputGroup-sizing-lg-emailcode">验证码
                            <svg width="1.2em" height="1.2em" viewBox="0 0 16 16" class="bi bi-shield-lock-fill"
                                 fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                              <path fill-rule="evenodd"
                                    d="M8 .5c-.662 0-1.77.249-2.813.525a61.11 61.11 0 0 0-2.772.815 1.454 1.454 0 0 0-1.003 1.184c-.573 4.197.756 7.307 2.368 9.365a11.192 11.192 0 0 0 2.417 2.3c.371.256.715.451 1.007.586.27.124.558.225.796.225s.527-.101.796-.225c.292-.135.636-.33 1.007-.586a11.191 11.191 0 0 0 2.418-2.3c1.611-2.058 2.94-5.168 2.367-9.365a1.454 1.454 0 0 0-1.003-1.184 61.09 61.09 0 0 0-2.772-.815C9.77.749 8.663.5 8 .5zm.5 7.415a1.5 1.5 0 1 0-1 0l-.385 1.99a.5.5 0 0 0 .491.595h.788a.5.5 0 0 0 .49-.595L8.5 7.915z"/>
                            </svg>
                        </span>
                    </div>
                    <input type="text" id="emailcode" class="form-control" placeholder="输入验证码"
                           aria-label="Sizing example input" aria-describedby="inputGroup-sizing-lg-emailcode">
                    <button id="sendemailcodebtn" onclick="sendEmailCode()" class="btn btn-outline-success my-2 my-sm-0"
                            type="button"
                            style="margin-left: 3px;">发送验证码
                    </button>
                </div>
                <input type="button" value="登 录" class="btn btn-primary btn-lg btn-block" onclick="loginbyemailcode()">
            </div>
        </div>
        <div style="text-align: right; margin-top: 10px; font-size: 16px;">
            <a href="#" class="badge badge-warning">忘记密码？</a>
            <a href="../register/regist.html" class="badge badge-success">注册账号>></a>
        </div>
        <hr class="my-1">

    </div>
</div>
<script src="../bootstrap-dist/js/bootstrap.js"></script>
<script src="../js/common.js" type="text/javascript"></script>
<script type="text/javascript">
    function login() {
        faep.execute("user/login", faep.setParams(["loginid", "password"]), function (ret) {
            if (ret == 'OK') {
                //alert("登陆成功！" + ret);
                window.location.href = "../data/homepage.html";
            } else {
                faep.alert(ret);
            }
        });
    }

    // 发送手机号验证码
    function sendVCode() {
        if (faep.isEmpty($("#phone").val())) {
            faep.alert("手机号不能为空！");
            return;
        }
        $("#sendcodebtn").attr("disabled", "true");
        $("#sendcodebtn").text("正在发送...");
        faep.execute("user/sendloginvcode", faep.setParams(["phone"]), function (ret) {
            if (ret == 'OK') {
                $("#sendcodebtn").text("已发送");
                $("#sendcodebtn").attr("disabled", "true");
            } else {
                faep.alert(ret);
                $("#sendcodebtn").text("发送验证码");
                $("#sendcodebtn").removeAttr("disabled");
            }
        });
    }

    // 手机号登录
    function loginbycode() {
        if (faep.isEmpty($("#phone").val())) {
            faep.alert("手机号不能为空！");
            return;
        }
        if (faep.isEmpty($("#verifycode").val())) {
            faep.alert("验证码不能为空！");
            return;
        }
        faep.execute("user/loginbyvcode", faep.setParams(["phone", "verifycode"]), function (ret) {
            if (ret == 'OK') {
                //alert("登陆成功！" + ret);
                window.location.href = "../data/homepage.html";
            } else {
                faep.alert(ret);
            }
        });
    }

    // 发送邮箱验证码
    function sendEmailCode() {
        if (faep.isEmpty($("#email").val())) {
            faep.alert("邮箱不能为空！");
            return;
        }
        $("#sendemailcodebtn").attr("disabled", "true");
        $("#sendemailcodebtn").text("正在发送...");
        faep.execute("user/sendemailcode", faep.setParams(["email"]), function (ret) {
            if (ret == 'OK') {
                $("#sendemailcodebtn").text("已发送");
                $("#sendemailcodebtn").attr("disabled", "true");
            } else {
                faep.alert(ret);
                $("#sendemailcodebtn").text("发送验证码");
                $("#sendemailcodebtn").removeAttr("disabled");
            }
        });
    }

    // 邮箱登录
    function loginbyemailcode() {
        if (faep.isEmpty($("#email").val())) {
            faep.alert("邮箱不能为空！");
            return;
        }
        if (faep.isEmpty($("#emailcode").val())) {
            faep.alert("验证码不能为空！");
            return;
        }
        faep.execute("user/loginbyemailcode", faep.setParams(["email", "emailcode"]), function (ret) {
            if (ret == 'OK') {
                //alert("登陆成功！" + ret);
                window.location.href = "../data/homepage.html";
            } else {
                faep.alert(ret);
            }
        });
    }
</script>
</body>
</html>